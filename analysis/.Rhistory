substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", grep("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", fixed=T), nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java"))
?grep
substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", grep("org", "experimental org jfree experimental chart demo LogAxisDemo1.java", fixed=T), nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java"))
grep("org", "experimental org jfree experimental chart demo LogAxisDemo1.java", fixed=T)
regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")
regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")$match.length
regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java)[[1]][1]
regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java)[[1]]
regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java)
regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")[[1]][1]
substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", grep("org", "experimental org jfree experimental chart demo LogAxisDemo1.java", fixed=T), nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java"))
substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", regexpr("org", "experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")[[1]][1] , nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java"))
str_replace_all(substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", regexpr("org", "experimental/org/jfree/experimental/chart/demore/LogAxisDemo1.java")[[1]][1] , nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")), "/", ".")
substr(str_replace_all(substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", regexpr("org", "experimental/org/jfree/experimental/chart/demore/LogAxisDemo1.java")[[1]][1] , nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")), "/", "."), 0, nchar("org.jfree.experimental.chart.demo.LogAxisDemo1.java") - 5)
str_replace(str_replace_all(substr("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java", regexpr("org", "experimental/org/jfree/experimental/chart/demore/LogAxisDemo1.java")[[1]][1] , nchar("experimental/org/jfree/experimental/chart/demo/LogAxisDemo1.java")), "/", "."), ".java", "")
full_data %>% mutate(file_changed = str_replace(str_replace_all(substr(file_changed, regexpr("org", file_changed)[[1]][1] , nchar(file_changed)), "/", "."), ".java", ""))
View(full_data %>% mutate(file_changed = str_replace(str_replace_all(substr(file_changed, regexpr("org", file_changed)[[1]][1] , nchar(file_changed)), "/", "."), ".java", "")))
for (file_changed in full_data$file_changed){
print(str_replace(str_replace_all(substr(file_changed, regexpr("org", file_changed)[[1]][1] , nchar(file_changed)), "/", "."), ".java", ""))
}
for (file_changed in full_data$file_changed){
file_names <- c()
for (file_changed in full_data$file_changed){
file_names <- c(file_names, (str_replace(str_replace_all(substr(file_changed, regexpr("org", file_changed)[[1]][1] , nchar(file_changed)), "/", "."), ".java", ""))
)
}
full_data$file_changed <- file_names
View(full_data)
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
View(full_data)
regexpr("abc", "NOT HERE")
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
View(full_data)
full_data %>% filter(startsWith(file_changed, "org") || startsWith(file_changed, "com"))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com"))
fault_classes <- read_csv("../data/classes_modified.csv")
fault_classes <- read_csv("../data/classes_modified.csv", col_names = c("project", "bug_id", "file_changed"))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% summarise(sentiment_score = mean(sentiment_score))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed, bug_id) %>% summarise(sentiment_score = mean(sentiment_score))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% summarise(sentiment_score = mean(sentiment_score))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = project,y=sentiment_score)) + geom_boxplot(aes(group=project))
View(fault_classes)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_boxplot(aes(group=file_changed))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_boxplot(aes(group=file_changed)) + theme(axis.text.x = element_text(angle = 45))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_boxplot(aes(group=file_changed)) + theme(axis.text.x = element_text(angle = 45, hjust=1))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% arrange(file_changed)
VieW(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% arrange(file_changed))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% arrange(file_changed))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_jitter(aes(group=file_changed, colour=bug_fix_commit)) + theme(axis.text.x = element_text(angle = 45, hjust=1))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_jitter(aes(group=file_changed, colour=bug_fix_commit)) + theme(axis.text.x = element_text(angle = 45, hjust=1)) + facet_wrap(~project)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_jitter(aes(group=file_changed, colour=bug_fix_commit)) + theme(axis.text.x = element_text(angle = 45, hjust=1)) + facet_wrap(~project, scales=free)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_jitter(aes(group=file_changed, colour=bug_fix_commit)) + theme(axis.text.x = element_text(angle = 45, hjust=1)) + facet_wrap(~project, scales="free")
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% filter(project=="Closure")
View(full_data)
full_data %>% filter(project=+"Closure")
full_data %>% filter(project=="Closure")
View(full_data %>% filter(project=="Closure"))
View(fault_classes)
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure"))
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure"))
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure") %>% filter(!is.na(bug_id)))
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure"))
View(fault_classes)
full_data %>% filter(file_changed== "	com.google.javascript.jscomp.TypeCheck")
full_data %>% filter(file_changed== "com.google.javascript.jscomp.TypeCheck")
full_data %>% filter(grepl("com.google.javascript.jscomp.TypeCheck", file_changed))
full_data %>% filter(grepl("TypeCheck", file_changed))
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
full_data %>% filter(grepl("com.google.javascript.jscomp.TypeCheck", file_changed))
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure") %>% filter(!is.na(bug_id)))
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure")))
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure"))
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
View(full_data %>% left_join(fault_classes) %>% filter(project=="Closure") %>% filter(!is.na(bug_id)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_jitter(aes(group=file_changed, colour=bug_fix_commit)) + theme(axis.text.x = element_text(angle = 45, hjust=1)) + facet_wrap(~project, scales="free")
full_data %>% filter(file_changed == "org.jfree.chart.plot.XYPlot")
View(full_data %>% filter(file_changed == "org.jfree.chart.plot.XYPlot"))
View(full_data %>% filter(file_changed == "org.jfree.chart.renderer.category.AbstractCategoryItemRenderer"))
View(full_data %>% filter(file_changed == "org.jfree.chart.renderer.category.MinMaxCategoryRenderer"))
View(full_data %>% filter(file_changed == "org.jfree.chart.plot.ValueMarker"))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% filter(!is.na(bug_id)) %>% group_by(project, file_changed) %>% ggplot(aes(x = file_changed,y=sentiment_score)) + geom_boxplot(aes(group=file_changed, colour=bug_fix_commit)) + theme(axis.text.x = element_text(angle = 45, hjust=1)) + facet_wrap(~project, scales="free")
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% arrange(sentiment_score)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% arrange(-sentiment_score)
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% top_n(50, -sentiment_score))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% top_n(50, sentiment_score))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% top_n(50, -sentiment_score))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id) %>% group_by(file_changed) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = meean(subjectivity_score),  is_faulty_class = first(is_faulty_class)))
)
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = meean(subjectivity_score),  is_faulty_class = first(is_faulty_class)))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class)))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed,commit_hash) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed,commit_hash) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()))
View(full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=sentiment_score)) + geom_boxplot(aes(group=is_faulty_class))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=average_sentiment)) + geom_boxplot(aes(group=is_faulty_class))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=average_sentiment)) + geom_boxplot(aes(group=interaction(project,is_faulty_class)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=average_sentiment)) + geom_boxplot(aes(group=interaction(project,is_faulty_class)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=average_subjectivity)) + geom_boxplot(aes(group=interaction(project,is_faulty_class)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=file_changed,y=average_subjectivity)) + geom_boxplot(aes(group=interaction(file_changed,is_faulty_class)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=file_changed,y=subjectivity_score)) + geom_boxplot(aes(group=interaction(file_changed,is_faulty_class)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=file_changed,y=subjectivity_score)) + geom_boxplot(aes(group=interaction(file_changed,is_faulty_class))) + facet_wrap(~project)
top_50_commits <- full_data %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
faulty_files <- full_data %>%
filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>%
left_join(fault_classes) %>%
mutate(is_faulty_class=!is.na(bug_id))
top_50_commits <- faulty_classes %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
View(top_50_commits)
top_50_commits <- faulty_files %>% group_by(project,commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(project,commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(project,commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(project,commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
top_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class)) %>% top_n(50, -sentiment)
View(bottom_50_commits)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(file_changed, collapse=":")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = ifelse(is_faulty_class, paste(file_changed, collapse=":"), "") %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = ifelse(is_faulty_class, paste(file_changed, collapse=":"), "")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = ifelse(is_faulty_class, paste(file_changed, collapse=":"), "")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(ifelse(is_faulty_class, file_changed, NA), collapse=":")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(ifelse(is_faulty_class, file_changed, null), collapse=":")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>% top_n(50, -sentiment)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>% top_n(50, -sentiment) %>% arrange(-sentiment)
View(bottom_50_commits)
bottom_50_commits <- faulty_files %>% group_by(commit_hash) %>% summarise(sentiment=first(sentiment_score), contains_faulty_file = any(is_faulty_class), faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>% top_n(50, -sentiment) %>% arrange(sentiment)
View(top_50_commits)
top_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, sentiment) %>%
arrange(-sentiment)
View(top_50_commits)
top_50_commits %>% count(contains_faulty_file == T)
top_50_commits %>% ungroup() %>% count(contains_faulty_file == T)
top_50_commits %>% ungroup() %>% filter(contains_faulty_file == T) %>% summarise(n=n())
top_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, sentiment) %>%
arrange(-sentiment) %>%
slice(1:50)
View(top_50_commits)
bottom_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, -sentiment) %<%
arrange(sentiment) %>%
slice(1:50)
bottom_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, -sentiment) %>%
arrange(sentiment) %>%
slice(1:50)
View(bottom_50_commits)
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
bottom_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, -sentiment) %>%
arrange(sentiment) %>%
slice(1:50) %>%
right_join(full_data %>% select(project,commit_hash))
View(bottom_50_commits)
bottom_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, -sentiment) %>%
arrange(sentiment) %>%
slice(1:50) %>%
inner_join(full_data %>% select(project,commit_hash))
View(bottom_50_commits)
bottom_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, -sentiment) %>%
arrange(sentiment) %>%
slice(1:50) %>%
inner_join(full_data %>% select(project,commit_hash) %>% unique.data.frame())
top_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, sentiment) %>%
arrange(-sentiment) %>%
slice(1:50) %>%
inner_join(full_data %>% select(project,commit_hash) %>% unique.data.frame()) %>%
select(5,1,2,3,4)
View(top_50_commits)
write_csv(top_50_commits, "commits_to_analyse.csv")
write_csv(bottom_50_commits, "commits_to_analyse.csv", append=T)
write_csv(top_50_commits, "commits_to_analyse.csv")
bottom_50_commits <- faulty_files %>%
group_by(commit_hash) %>%
summarise(
sentiment=first(sentiment_score),
contains_faulty_file = any(is_faulty_class),
faulty_files = paste(ifelse(is_faulty_class, file_changed, ""), collapse=":")) %>%
top_n(50, -sentiment) %>%
arrange(sentiment) %>%
slice(1:50) %>%
inner_join(full_data %>% select(project,commit_hash) %>% unique.data.frame()) %>%
select(5,1,2,3,4)
write_csv(bottom_50_commits, "commits_to_analyse.csv", append=T)
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=average_subjectivity)) + geom_boxplot(aes(group=interaction(project,is_faulty_class)))
full_data %>% filter(startsWith(file_changed, "org") | startsWith(file_changed, "com")) %>% left_join(fault_classes) %>% mutate(is_faulty_class = !is.na(bug_id)) %>% group_by(project,file_changed,commit_hash) %>% summarise(sentiment_score = mean(sentiment_score), subjectivity_score = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% summarise(average_sentiment = mean(sentiment_score), average_subjectivity = mean(subjectivity_score),  is_faulty_class = first(is_faulty_class), num_changes = n()) %>% ggplot(aes(x=project,y=average_sentiment)) + geom_boxplot(aes(group=interaction(project,is_faulty_class)))
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
# average the scores per file
summarise(
average_sentiment = mean(sentiment_score),
average_subjectivity = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
ggplot(aes(x=project,y=average_sentiment)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class, fill=is_faulty_class)))
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
# average the scores per file
summarise(
average_sentiment = mean(sentiment_score),
average_subjectivity = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
ggplot(aes(x=project,y=average_sentiment)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class),fill=is_faulty_class))
stats_data <- data.frame(project = character(), sent.p.value = numeric(), sent.a12 = numeric(), subj.p.value = numeric(), subj.a12 = numeric(), stringsAsFactors = F)
for(project in c("Chart", "Closure", "Lang", "Math", "Mockito", "Time")){
data.mask <- faulty_files[faulty_files$project==project,]
sent.p.value <- wilcox.test(data.mask[data.mask$is_faulty_class ==T,]$sentiment_score, data.mask[data.mask$is_faulty_class==F,]$sentiment_score)$p.value
subj.p.value <- wilcox.test(data.mask[data.mask$is_faulty_class ==T,]$subjectivity_score, data.mask[data.mask$is_faulty_class==F,]$subjectivity_score)$p.value
sent.a12 <- VD.A(data.mask$sentiment_score, data.mask$is_faulty_class)$estimate
subj.a12 <- VD.A(data.mask$subjectivity_score, data.mask$is_faulty_class)$estimate
stats_data[nrow(stats_data)+1,] = list(project, sent.p.value, sent.a12, subj.p.value, subj.a12)
write.macro(paste0("faultyClassSubjPValue",project), subj.p.value)
write.macro(paste0("faultyClassSubjAhat",project), subj.a12)
write.macro(paste0("faultyClassSentPValue",project), sent.p.value)
write.macro(paste0("faultyClassSentAhat",project), sent.a12)
}
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
# average the scores per file
summarise(
average_sentiment = mean(sentiment_score),
average_subjectivity = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
ggplot(aes(x=project,y=average_sentiment)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class),fill=is_faulty_class)) +
geom_text(data = stats_data, aes(y = 1.25,x=project, label = paste0("p = ",format(round(sent.p.value,digits = 2),nsmall = 2))), size = 6) +
geom_text(data = stats_data, aes(y = 1.1,x=project, label = paste0("hat(A)  == ",format(round(sent.a12, digits=2), snamell = 2))), parse = T, size = 6) +
scale_y_continuous(limits=c(-1,1.25), breaks=c(-1,-0.6,-0.2,0.2,0.6,1))
faulty_file_data <- faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
# average the scores per file
summarise(
average_sentiment = mean(sentiment_score),
average_subjectivity = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n())
faulty_file_data %>%
ggplot(aes(x=project,y=average_subjectivity)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class),fill=is_faulty_class)) +
geom_text(data = stats_data, aes(y = 1.125,x=project, label = paste0("p = ",format(round(subj.p.value,digits = 2),nsmall = 2))), size = 6) +
geom_text(data = stats_data, aes(y = 1.05,x=project, label = paste0("hat(A)  == ",format(round(subj.a12, digits=2), snamell = 2))), parse = T, size = 6) +
scale_y_continuous(limits=c(1,1.125), breaks=c(0,0.2,0.4,0.6,0.8,1))
faulty_file_data %>%
ggplot(aes(x=project,y=average_subjectivity)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class),fill=is_faulty_class)) +
geom_text(data = stats_data, aes(y = 1.125,x=project, label = paste0("p = ",format(round(subj.p.value,digits = 2),nsmall = 2))), size = 6) +
geom_text(data = stats_data, aes(y = 1.05,x=project, label = paste0("hat(A)  == ",format(round(subj.a12, digits=2), snamell = 2))), parse = T, size = 6) +
scale_y_continuous(limits=c(0,1.125), breaks=c(0,0.2,0.4,0.6,0.8,1))
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
faulty_files
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n())
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = count(sentiment_score > 0), num_negative = count(sentiment_score < 0), num_neutral = count(sentiment_score==0))
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0))
View(faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0)))
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0)) %>% filter(num_positive > 0 & num_negative == 0)
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0)) %>% filter(num_positive > 0 & num_negative == 0) %>% arrange(-num_positive)
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class))
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% arrange(-num_positive)
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive)
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive) %>% arrange(-num_positive)
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/write.R')
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive) %>% arrange(-num_positive) %>% rename("File" = file_changed, "Positive" = num_positive, "Negative" = num_negative, "Neutral" = num_neutral, "Faulty" = is_faulty_class) %>% write_table("sentiment_in_files.tex")
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive) %>% arrange(-num_positive) %>% rename("File" = file_changed, "Positive" = num_positive, "Negative" = num_negative, "Neutral" = num_neutral, "Faulty" = is_faulty_class) %>% write_table("sentiment_in_files.tex")
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive) %>% arrange(-num_positive) %>% rename("File" = file_changed, "Positive" = num_positive, "Negative" = num_negative, "Neutral" = num_neutral, "Faulty" = is_faulty_class) %>% write_table(filename = "sentiment_in_files.tex")
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive) %>% arrange(-num_positive) %>% rename("File" = file_changed, "Positive" = num_positive, "Negative" = num_negative, "Neutral" = num_neutral, "Faulty" = is_faulty_class) %>% write_table(filename = "sentiment_in_files.tex", min.dp=0, round.dp=0)
faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(sentiment_score),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>% group_by(file_changed) %>% summarise(num_positive = sum(sentiment_score > 0), num_negative = sum(sentiment_score < 0), num_neutral = sum(sentiment_score==0), is_faulty_class=first(is_faulty_class)) %>% top_n(10, num_positive) %>% arrange(-num_positive) %>% rename("File" = file_changed, "Positive" = num_positive, "Negative" = num_negative, "Neutral" = num_neutral, "Faulty" = is_faulty_class) %>% write_table(filename = "sentiment_in_files.tex", max.dp=0, round.dp=0)
source('D:/PhD/experiments/commit_sentiment_analysis/analysis/analyse.R')
faulty_file_data <- faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(abs(sentiment_score)),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
# average the scores per file
summarise(
average_sentiment = mean(sentiment_score),
average_subjectivity = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n())
plot <- faulty_file_data %>%
ggplot(aes(x=project,y=average_sentiment)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class),fill=is_faulty_class)) +
geom_text(data = stats_data, aes(y = 1.125,x=project, label = paste0("p = ",format(round(sent.p.value,digits = 2),nsmall = 2))), size = 6) +
geom_text(data = stats_data, aes(y = 1.05,x=project, label = paste0("hat(A)  == ",format(round(sent.a12, digits=2), snamell = 2))), parse = T, size = 6) +
scale_y_continuous(limits=c(0,1.25), breaks=c(-1,-0.6,-0.2,0.2,0.6,1))
plot
stats_data <- data.frame(project = character(), sent.p.value = numeric(), sent.a12 = numeric(), subj.p.value = numeric(), subj.a12 = numeric(), stringsAsFactors = F)
for(project in c("Chart", "Closure", "Lang", "Math", "Mockito", "Time")){
data.mask <- faulty_files[faulty_files$project==project,]
sent.p.value <- wilcox.test(abs(data.mask[data.mask$is_faulty_class ==T,]$sentiment_score), abs(data.mask[data.mask$is_faulty_class==F,]$sentiment_score))$p.value
subj.p.value <- wilcox.test(data.mask[data.mask$is_faulty_class ==T,]$subjectivity_score, data.mask[data.mask$is_faulty_class==F,]$subjectivity_score)$p.value
sent.a12 <- VD.A(abs(data.mask$sentiment_score), data.mask$is_faulty_class)$estimate
subj.a12 <- VD.A(data.mask$subjectivity_score, data.mask$is_faulty_class)$estimate
stats_data[nrow(stats_data)+1,] = list(project, sent.p.value, sent.a12, subj.p.value, subj.a12)
}
faulty_file_data <- faulty_files %>%
group_by(project,file_changed,commit_hash) %>%
# take a single value per commit
summarise(
sentiment_score = mean(abs(sentiment_score)),
subjectivity_score = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n()) %>%
# average the scores per file
summarise(
average_sentiment = mean(sentiment_score),
average_subjectivity = mean(subjectivity_score),
is_faulty_class = first(is_faulty_class),
num_changes = n())
plot <- faulty_file_data %>%
ggplot(aes(x=project,y=average_sentiment)) +
geom_boxplot(aes(group=interaction(project,is_faulty_class),fill=is_faulty_class)) +
geom_text(data = stats_data, aes(y = 1.125,x=project, label = paste0("p = ",format(round(sent.p.value,digits = 2),nsmall = 2))), size = 6) +
geom_text(data = stats_data, aes(y = 1.05,x=project, label = paste0("hat(A)  == ",format(round(sent.a12, digits=2), snamell = 2))), parse = T, size = 6) +
scale_y_continuous(limits=c(0,1.25), breaks=c(-1,-0.6,-0.2,0.2,0.6,1))
plot
setwd("~/")
setwd("D:/PhD/experiments/commit_sentiment_analysis/analysis")
